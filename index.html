<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistika</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üìä</span>
                    <span>Statistika</span>
                </div>
                <p class="header-description">
                    An√°lise estat√≠stica com f√≥rmulas detalhadas e gr√°ficos interativos
                </p>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="tabs">
            <div class="tab active" data-section="variables">Tipos de Vari√°veis</div>
            <div class="tab" data-section="frequency">Distribui√ß√£o de Frequ√™ncia</div>
            <div class="tab" data-section="measures">Medidas Estat√≠sticas</div>
            <div class="tab" data-section="charts">Gr√°ficos</div>
            <div class="tab" data-section="csv">An√°lise de CSV</div>
        </div>

        <!-- Se√ß√£o de Classifica√ß√£o de Vari√°veis -->
        <section id="variables" class="section active">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span>üîç</span>
                        Tipos de Vari√°veis Estat√≠sticas
                    </h2>
                    <p class="card-description">
                        Aprenda a identificar e classificar diferentes tipos de vari√°veis
                    </p>
                </div>

                <div class="variable-classification">
                    <h4>üìä Como classificar vari√°veis</h4>
                    
                    <div class="classification-guide">
                        <div class="guide-step">
                            <h5>ü§î Primeiro: √â qualidade ou quantidade?</h5>
                            <div class="step-options">
                                <div class="option">
                                    <strong>Qualidade</strong> ‚Üí Vari√°vel Qualitativa
                                    <br><small>Caracter√≠sticas, atributos, categorias</small>
                                </div>
                                <div class="option">
                                    <strong>Quantidade</strong> ‚Üí Vari√°vel Quantitativa  
                                    <br><small>N√∫meros, valores, medi√ß√µes</small>
                                </div>
                            </div>
                        </div>

                        <div class="guide-step">
                            <h5>üè∑Ô∏è Se for Qualitativa:</h5>
                            <div class="step-options">
                                <div class="option qualitative-nominal">
                                    <strong>üîµ Nominal:</strong> Sem ordem natural
                                    <br><small>Exemplos: sexo, cor dos olhos, marca</small>
                                </div>
                                <div class="option qualitative-ordinal">
                                    <strong>üü° Ordinal:</strong> Com ordem definida
                                    <br><small>Exemplos: escolaridade, conceito (A,B,C)</small>
                                </div>
                            </div>
                        </div>

                        <div class="guide-step">
                            <h5>üî¢ Se for Quantitativa:</h5>
                            <div class="step-options">
                                <div class="option quantitative-discrete">
                                    <strong>üü¢ Discreta:</strong> N√∫meros inteiros
                                    <br><small>Exemplos: filhos, carros, pessoas</small>
                                </div>
                                <div class="option quantitative-continuous">
                                    <strong>üü£ Cont√≠nua:</strong> Qualquer valor
                                    <br><small>Exemplos: peso, altura, tempo</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="examples-section">
                        <h4>üí° Exemplos pr√°ticos</h4>
                        <div class="examples-grid">
                            <div class="example-card qualitative-nominal">
                                <h6>üîµ Qualitativa Nominal</h6>
                                <ul>
                                    <li>G√™nero (M/F)</li>
                                    <li>Estado civil</li>
                                    <li>Cor dos olhos</li>
                                    <li>Marca de carro</li>
                                </ul>
                            </div>
                            <div class="example-card qualitative-ordinal">
                                <h6>üü° Qualitativa Ordinal</h6>
                                <ul>
                                    <li>Escolaridade</li>
                                    <li>Classe social</li>
                                    <li>Conceito (A,B,C,D)</li>
                                    <li>Satisfa√ß√£o</li>
                                </ul>
                            </div>
                            <div class="example-card quantitative-discrete">
                                <h6>üü¢ Quantitativa Discreta</h6>
                                <ul>
                                    <li>N√∫mero de filhos</li>
                                    <li>Carros vendidos</li>
                                    <li>Funcion√°rios</li>
                                    <li>Gols marcados</li>
                                </ul>
                            </div>
                            <div class="example-card quantitative-continuous">
                                <h6>üü£ Quantitativa Cont√≠nua</h6>
                                <ul>
                                    <li>Peso (kg)</li>
                                    <li>Altura (m)</li>
                                    <li>Temperatura (¬∞C)</li>
                                    <li>Sal√°rio (R$)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="tips-section">
                        <h4>üí° Dicas importantes</h4>
                        <div class="tips-grid">
                            <div class="tip">
                                <strong>üîç Para identificar:</strong>
                                <p>Pergunte-se: "Posso fazer contas com essa vari√°vel?" Se sim, √© quantitativa.</p>
                            </div>
                            <div class="tip">
                                <strong>üìä Para ordenar:</strong>
                                <p>Se √© qualitativa, pergunte: "Existe uma ordem natural?" Se sim, √© ordinal.</p>
                            </div>
                            <div class="tip">
                                <strong>üî¢ Para n√∫meros:</strong>
                                <p>Se √© quantitativa, pergunte: "S√≥ aceita valores inteiros?" Se sim, √© discreta.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Distribui√ß√£o de Frequ√™ncia -->
        <section id="frequency" class="section">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span>üìà</span>
                        Distribui√ß√£o de Frequ√™ncia
                    </h2>
                    <p class="card-description">
                        Monte tabelas de frequ√™ncia usando a regra de Sturges
                    </p>
                </div>

                <div class="form-group">
                    <label for="dataInput">Digite os valores (separados por v√≠rgula):</label>
                    <textarea id="dataInput" rows="3" placeholder="Exemplo: 12, 15, 18, 20, 22, 24, 25, 28, 30, 32, 35, 36, 38, 40, 42, 43, 45, 46, 48, 50"></textarea>
                </div>

                <div class="toggle-container">
                    <label class="toggle-label">
                        <div class="toggle-switch active" id="freqStepsToggle">
                            <div class="toggle-slider"></div>
                        </div>
                        Mostrar c√°lculos passo a passo
                    </label>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary pulse" onclick="calculateFrequency()">
                        Calcular
                    </button>
                    <button class="btn btn-secondary" onclick="clearFrequency()">
                        Limpar
                    </button>
                </div>

                <div id="frequencyResults"></div>
            </div>
        </section>

        <!-- Se√ß√£o de Medidas -->
        <section id="measures" class="section">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span>üßÆ</span>
                        Medidas Estat√≠sticas
                    </h2>
                    <p class="card-description">
                        Calcule m√©dia, mediana, moda, vari√¢ncia, desvio padr√£o e coeficiente de varia√ß√£o
                    </p>
                </div>

                <div class="form-group">
                    <label for="measuresInput">Digite os valores (separados por v√≠rgula):</label>
                    <textarea id="measuresInput" rows="3" placeholder="Exemplo: 1.2, 1.5, 1.8, 2.0, 2.2, 2.2, 2.5, 2.8, 3.0, 3.5"></textarea>
                </div>

                <div class="form-group">
                    <label for="populationType">Tipo de dados:</label>
                    <select id="populationType">
                        <option value="sample">Amostra (usar n-1 para vari√¢ncia)</option>
                        <option value="population">Popula√ß√£o (usar n para vari√¢ncia)</option>
                    </select>
                    <small style="color: var(--secondary); display: block; margin-top: 0.5rem;">
                        <strong>Amostra:</strong> Quando voc√™ tem apenas parte dos dados<br>
                        <strong>Popula√ß√£o:</strong> Quando voc√™ tem todos os dados poss√≠veis
                    </small>
                </div>

                <div class="toggle-container">
                    <label class="toggle-label">
                        <div class="toggle-switch active" id="measuresStepsToggle">
                            <div class="toggle-slider"></div>
                        </div>
                        Mostrar c√°lculos detalhados
                    </label>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary pulse" onclick="calculateMeasures()">
                        Calcular
                    </button>
                    <button class="btn btn-secondary" onclick="clearMeasures()">
                        Limpar
                    </button>
                </div>

                <div id="measuresResults"></div>
            </div>
        </section>

        <!-- Se√ß√£o de Gr√°ficos -->
        <section id="charts" class="section">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span>üìä</span>
                        Cria√ß√£o de Gr√°ficos
                    </h2>
                    <p class="card-description">
                        Crie diferentes tipos de gr√°ficos para visualizar seus dados
                    </p>
                </div>

                <div class="form-group">
                    <label for="chartDataInput">Digite os dados (formato: nome:valor):</label>
                    <textarea id="chartDataInput" rows="3" placeholder="Exemplo: Janeiro:100, Fevereiro:150, Mar√ßo:120, Abril:180, Maio:200, Junho:175"></textarea>
                </div>

                <div class="form-group">
                    <label for="chartType">Tipo de Gr√°fico:</label>
                    <select id="chartType">
                        <option value="bar">Barras</option>
                        <option value="pie">Pizza</option>
                        <option value="line">Linha</option>
                        <option value="doughnut">Rosca</option>
                        <option value="polarArea">Polar</option>
                        <option value="radar">Radar</option>
                    </select>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary pulse" onclick="createChart()">
                        Criar Gr√°fico
                    </button>
                    <button class="btn btn-secondary" onclick="clearChart()">
                        Limpar
                    </button>
                </div>

                <div class="chart-container">
                    <canvas id="myChart" style="max-width: 800px; margin: 0 auto;"></canvas>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de CSV -->
        <section id="csv" class="section">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span>üìÅ</span>
                        An√°lise de Arquivos CSV
                    </h2>
                    <p class="card-description">
                        Carregue um arquivo CSV e veja as estat√≠sticas automaticamente
                    </p>
                </div>

                <div class="alert alert-info">
                    <span class="alert-icon">üí°</span>
                    <span>O sistema vai analisar todas as colunas num√©ricas do seu arquivo</span>
                </div>

                <!-- Instru√ß√µes de formato CSV -->
                <div class="csv-format-info">
                    <h4>üìã Como deve ser seu arquivo CSV</h4>
                    <div class="format-example">
                        <h5>Estrutura necess√°ria:</h5>
                        <div class="code-block">
                            Nome,Idade,Altura,Peso<br>
                            Jo√£o,25,1.75,70<br>
                            Maria,30,1.60,55<br>
                            Pedro,22,1.80,85
                        </div>
                        <div class="format-rules">
                            <h5>Regras importantes:</h5>
                            <ul>
                                <li>‚úÖ Primeira linha com nomes das colunas</li>
                                <li>‚úÖ Use v√≠rgula para separar os valores</li>
                                <li>‚úÖ Use ponto para n√∫meros decimais</li>
                                <li>‚úÖ N√£o deixe c√©lulas vazias</li>
                                <li>‚ùå Evite caracteres especiais nos nomes</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="file-input-wrapper">
                    <label for="csvFile" class="file-input-label">
                        üìÇ Escolher arquivo CSV
                    </label>
                    <input type="file" id="csvFile" accept=".csv" onchange="handleCSVUpload(event)">
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="clearCSV()">
                        Limpar Dados
                    </button>
                </div>

                <div id="csvResults"></div>
            </div>
        </section>
    </main>

    <!-- Chart.js com fallback aprimorado -->
    <script>
        // Fun√ß√£o para carregar Chart.js com fallback
        function loadChartJS() {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js';
                script.onload = () => {
                    if (typeof Chart !== 'undefined') {
                        console.log('Chart.js carregado com sucesso!');
                        resolve();
                    } else {
                        reject(new Error('Chart.js n√£o foi carregado corretamente'));
                    }
                };
                script.onerror = () => {
                    console.warn('Erro ao carregar Chart.js do CDN principal. Tentando fonte alternativa...');
                    // Tentar fonte alternativa
                    const altScript = document.createElement('script');
                    altScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js';
                    altScript.onload = () => {
                        if (typeof Chart !== 'undefined') {
                            console.log('Chart.js carregado da fonte alternativa!');
                            resolve();
                        } else {
                            reject(new Error('Chart.js n√£o dispon√≠vel em nenhuma fonte'));
                        }
                    };
                    altScript.onerror = () => {
                        console.error('Chart.js n√£o p√¥de ser carregado de nenhuma fonte');
                        reject(new Error('Chart.js n√£o dispon√≠vel'));
                    };
                    document.head.appendChild(altScript);
                };
                document.head.appendChild(script);
            });
        }

        // Carregar Chart.js antes de inicializar a aplica√ß√£o
        loadChartJS().catch(() => {
            console.warn('Funcionalidades de gr√°fico n√£o estar√£o dispon√≠veis');
        });
    </script>
    
    <!-- Scripts do sistema em ordem de depend√™ncia -->
    <script src="scripts/statistics-calculator.js"></script>
    <script src="scripts/ui-controller.js"></script>
    <script src="scripts/frequency-analysis.js"></script>
    <script src="scripts/measures-analysis.js"></script>
    <script src="scripts/chart-manager.js"></script>
    <script src="scripts/csv-analyzer.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html> 